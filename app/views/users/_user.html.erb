<tr class="<%= cycle('odd', 'even') %>">
  <td>
    <%= link_to(h(user.login), user_path(user.id)) %>
  </td>
  <td>
    <%= h(user.name) %>
  </td>
  <td>
    <%= mail_to user.email, user.email, :encode => "javascript" %>
  </td>
  <td>
    <%= user.created_at.to_date.to_s %>
  </td>
  <td>
    <%= user.subnets.count %>
  </td>
  <td>
    <%= user.nodes.count %>
  </td>
  <% if logged_in? and current_user.has_role?('admin') %>
  <td>
    <%= user.active? ? 'yes' : 'no' %>
  </td>
  <td>
    <%= user.enabled ? 'yes' : 'no' %>
    <% unless user == current_user %>
    <% if user.enabled %>
    <%= link_to('disable', user_path(user.id), :method => :delete) %>
    <% else %>
    <%= link_to('enable', enable_user_path(user.id), :method => :put) %>
    <% end %>
    <% end %>
  </td>
  <td>
    <%= user.roles.collect { |role| role != user.roles.last ? "#{role.name}, " : "#{role.name}" } %>
    <% unless user == current_user %>
    <%= link_to 'edit roles', user_roles_path(user) %>
    <% end %>
  </td>
  <% end %>
</tr>
